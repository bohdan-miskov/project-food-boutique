{"version":3,"file":"footer-BOpFOAkR.js","sources":["../../src/ui/modals.ts","../../src/api/subscriptionApi.ts","../../src/tsSections/footer.ts"],"sourcesContent":["export const openModal = (modalBackdrop: HTMLElement) => {\n  modalBackdrop.classList.add('is-open');\n  const closeBtn = modalBackdrop.querySelector(\n    '.modal-close-btn'\n  ) as HTMLButtonElement;\n  const handleCloseClick = () => closeModal(modalBackdrop, handleCloseClick);\n  closeBtn.addEventListener('click', handleCloseClick);\n};\n\nexport const closeModal = (modalBackdrop: HTMLElement, handler: () => void) => {\n  modalBackdrop.classList.remove('is-open');\n  const closeBtn = modalBackdrop.querySelector(\n    '.modal-close-btn'\n  ) as HTMLButtonElement;\n  closeBtn.removeEventListener('click', handler);\n};\n","import axios from 'axios';\n\nexport const subscribe = async (email: string) => {\n  return await axios.post(\n    'https://food-boutique.b.goit.study/api/subscription',\n    {\n      email,\n    }\n  );\n};\n","import { AxiosError } from 'axios';\nimport { subscribe } from '../api/subscriptionApi';\nimport { openModal } from '../ui/modals';\n\nconst handleSubmitSubscribing = async (e: Event) => {\n  e.preventDefault();\n  const form = e.target as HTMLFormElement;\n  const data = new FormData(form);\n  try {\n    const response = await subscribe(data.get('userEmail') as string);\n    const backdrop = document.querySelector(\n      '.subscribing-thank-modal-backdrop'\n    ) as HTMLElement;\n    openModal(backdrop);\n  } catch (error) {\n    const err = error as AxiosError<{ message: string }>;\n    if (err.response?.status === 409) {\n      const backdrop = document.querySelector(\n        '.subscribing-error-modal-backdrop'\n      ) as HTMLElement;\n      openModal(backdrop);\n    }\n  } finally {\n    form.reset();\n  }\n};\n\nconst subscribingForm = document.querySelector(\n  '.footer-form'\n) as HTMLFormElement;\n\nsubscribingForm.addEventListener('submit', handleSubmitSubscribing);\n"],"names":["openModal","modalBackdrop","closeBtn","handleCloseClick","closeModal","handler","subscribe","email","axios","handleSubmitSubscribing","e","form","data","response","backdrop","error","_a","subscribingForm"],"mappings":"+uBAAa,MAAAA,EAAaC,GAA+B,CACzCA,EAAA,UAAU,IAAI,SAAS,EACrC,MAAMC,EAAWD,EAAc,cAC7B,kBAAA,EAEIE,EAAmB,IAAMC,EAAWH,EAAeE,CAAgB,EAChED,EAAA,iBAAiB,QAASC,CAAgB,CACrD,EAEaC,EAAa,CAACH,EAA4BI,IAAwB,CAC/DJ,EAAA,UAAU,OAAO,SAAS,EACvBA,EAAc,cAC7B,kBAAA,EAEO,oBAAoB,QAASI,CAAO,CAC/C,ECbaC,EAAY,MAAOC,GACvB,MAAMC,EAAM,KACjB,sDACA,CACE,MAAAD,CACF,CAAA,ECHEE,EAA0B,MAAOC,GAAa,OAClDA,EAAE,eAAe,EACjB,MAAMC,EAAOD,EAAE,OACTE,EAAO,IAAI,SAASD,CAAI,EAC1B,GAAA,CACF,MAAME,EAAW,MAAMP,EAAUM,EAAK,IAAI,WAAW,CAAW,EAC1DE,EAAW,SAAS,cACxB,mCAAA,EAEFd,EAAUc,CAAQ,QACXC,EAAO,CAEV,KAAAC,EADQD,EACJ,WAAJ,YAAAC,EAAc,UAAW,IAAK,CAChC,MAAMF,EAAW,SAAS,cACxB,mCAAA,EAEFd,EAAUc,CAAQ,CACpB,CAAA,QACA,CACAH,EAAK,MAAM,CACb,CACF,EAEMM,EAAkB,SAAS,cAC/B,cACF,EAEAA,EAAgB,iBAAiB,SAAUR,CAAuB"}