import{g as H,o as N,h as E,a as O,b as _,c as j}from"./assets/footer-VhV54VbN.js";import{a as $,S as R}from"./assets/vendor-C7T_U3ZN.js";const F=async()=>(await $.get("https://food-boutique.b.goit.study/api/products/categories")).data,Q=async()=>{const t=await F(),e=document.querySelector("[name='categoriesSelect']");t.forEach(o=>{const c=document.createElement("option");c.value=o,c.textContent=o.split("_").join(" "),e==null||e.appendChild(c)})};Q();const T={showSearch:!1,allowDeselect:!1,hideSelected:!0,placeholderText:"",closeOnSelect:!0};new R({select:"#filters-categories-select",settings:{...T,ariaLabel:"Choose product category"}});var D;(D=document.querySelector(".ss-content"))==null||D.setAttribute("aria-label","Choose product category");new R({select:"#filters-sort-select",settings:{...T,ariaLabel:"Choose products sort mode"}});const v=document.querySelectorAll(".ss-content");if(v.length<2)throw new Error("Filter selects is not found");v[0].setAttribute("aria-label","Choose product category");v[1].setAttribute("aria-label","Choose products sort mode");const z=(t,e,o,c,r)=>{const n={keyword:t,page:c,limit:r};switch(e!="all"&&(n.category=e),o){case"popularity":{n.byPopularity=!0;break}case"alph_asc":{n.byABC=!0;break}case"alph_desc":{n.byABC=!1;break}case"price_asc":{n.byPrice=!0;break}case"price_desc":{n.byPrice=!1;break}}return n},w=async t=>{const e=await H(t),o=document.querySelector(".product-modal-backdrop");o.innerHTML="",o.appendChild(G(e)),N(o)},G=({_id:t,img:e,name:o,category:c,desc:r,size:n,price:l,popularity:a,is10PercentOff:m})=>{const d=document.getElementById("product-modal-template").content.cloneNode(!0);m&&d.querySelector(".product-modal-window").classList.add("is-discount");const u=d.querySelector(".product-modal-image");u.src=e,u.alt=o+" image";const y=d.querySelector(".product-modal-title");y.textContent=o;const p=d.querySelectorAll(".product-modal-descr-item-value");p[0].textContent=c.split("_").join(" "),p[1].textContent=n,p[2].textContent=a.toString();const b=d.querySelector(".product-modal-descr-text");b.textContent=r;const I=d.querySelector(".product-modal-price");return I.textContent="$"+l,d.querySelector(".product-modal-btn").addEventListener("click",async A=>await E(A,t)),d},J=t=>{const e=document.querySelector(".products-list");e.innerHTML="";const o=document.querySelector(".products-empty-container");if(t.length===0){o.classList.remove("hidden");return}o.classList.add("hidden"),t.forEach(c=>e.appendChild(K(c)))},K=({_id:t,img:e,name:o,category:c,size:r,price:n,popularity:l,is10PercentOff:a})=>{const i=document.getElementById("products-card-template").content.cloneNode(!0);i.querySelector(".products-item").addEventListener("click",()=>{w(t)}),a&&i.querySelector(".products-item").classList.add("is-discount");const u=i.querySelector(".products-item-image");u.src=e,u.alt=o+" image";const y=i.querySelector(".products-subtitle");y.textContent=o;const p=i.querySelectorAll(".products-item-descr-item-value");p[0].textContent=c.split("_").join(" "),p[1].textContent=r,p[2].textContent=l.toString();const b=i.querySelector(".products-item-price");return b.textContent="$"+n,i.querySelector(".products-item-btn").addEventListener("click",async h=>await E(h,t)),i},U=(t,e,o)=>{const c=[];let r=Math.max(1,t-1),n=r+o-2;n>e&&(n=e,r=Math.max(1,n-o+1));for(let l=r;l<=n;l++)c.push(l);return c.length+1==e&&c.push(n+1),c};let P,q,f,L,s,g;const V=(t,e,o,c)=>{if(s=t,g=e,g<=1){document.querySelector(".products-pagination-container").classList.add("hidden");return}const r=document.querySelector(".products-pagination-center-side");r.innerHTML="";const n=U(s,g,o),l=n[0],a=n[n.length-1];l>2&&s>Math.floor(g/2)&&C(M(),r),n.forEach(m=>{C(W(m,c),r)}),a<g-1&&s<Math.floor(g/2)&&C(M(),r),X(g)},M=()=>{const t=document.createElement("button");return t.textContent="...",t.disabled=!0,t.classList.add("products-pagination-btn"),t},W=(t,e)=>{const o=document.createElement("button");return o.classList.add("products-pagination-btn"),o.textContent=t.toString(),t===s&&(o.classList.add("active"),o.disabled=!0),o.addEventListener("click",()=>{s=t,e(t)}),o},C=(t,e)=>{const o=document.createElement("li");o.appendChild(t),e.appendChild(o)},X=t=>{const e=s>1,o=s<t;P.disabled=!e,q.disabled=!e,f.disabled=!o,L.disabled=!o},Y=t=>{const e=document.querySelector(".products-pagination-left-side"),o=document.querySelector(".products-pagination-right-side");P=e.querySelector(".product-pagination-nav-btn.once"),q=e.querySelector(".product-pagination-nav-btn.all"),f=o.querySelector(".product-pagination-nav-btn.once"),L=o.querySelector(".product-pagination-nav-btn.all"),P.addEventListener("click",()=>{s--,t(s)}),q.addEventListener("click",()=>{s=1,t(s)}),f.addEventListener("click",()=>{s++,t(s)}),L.addEventListener("click",()=>{s=g,t(s)})},Z=()=>document.querySelector(".container").getBoundingClientRect().width>=768?5:3,tt=()=>{const e=document.querySelector(".container").getBoundingClientRect().width;return e>=1440?9:e>=768?8:6};let x="",B="all",k="popularity";const et=tt(),ot=Z(),nt=async t=>{var r,n,l;t.preventDefault();const e=t.target,o=new FormData(e),c=1;x=((r=o.get("searchQueryInput"))==null?void 0:r.toString().trim())??"",B=((n=o.get("categoriesSelect"))==null?void 0:n.toString())??"all",k=((l=o.get("sortSelect"))==null?void 0:l.toString())??"popularity",await S(c)},S=async t=>{const e=z(x,B,k,t,et),o=await O(e),c=o.results,r=o.totalPages;J(c),V(t,r,ot,S)};document.addEventListener("DOMContentLoaded",async()=>{var c,r,n;const t=document.querySelector(".filters-form");if(!t)return;t.addEventListener("submit",nt),Y(S);const e=new FormData(t),o=1;x=((c=e.get("searchQueryInput"))==null?void 0:c.toString().trim())??"",B=((r=e.get("categoriesSelect"))==null?void 0:r.toString())??"all",k=((n=e.get("sortSelect"))==null?void 0:n.toString())??"popularity",await S(o)});const ct=async(t=-1)=>{const e=await _(),o=t===-1?e.slice(0):e.slice(0,t),c=document.querySelector(".popular-products-list");c.innerHTML="",o.forEach(r=>c.appendChild(rt(r)))},rt=({_id:t,name:e,category:o,size:c,popularity:r,img:n})=>{const a=document.getElementById("popular-card-template").content.cloneNode(!0);a.querySelector(".popular-products-item").addEventListener("click",()=>{w(t)});const i=a.querySelector(".popular-products-item-image");i.src=n,i.alt=e+" image";const d=a.querySelector(".popular-products-subtitle");d.textContent=e;const u=a.querySelectorAll(".popular-products-item-descr-item-value");return u[0].textContent=o.split("_").join(" "),u[1].textContent=c,u[2].textContent=String(r),a.querySelector(".popular-products-item-btn").addEventListener("click",async p=>await E(p,t)),a},st=5;ct(st);const at=async(t=-1)=>{const e=await j(),o=t===-1?e.slice(0):e.slice(0,t),c=document.querySelector(".discount-products-list");c.innerHTML="",o.forEach(r=>c.appendChild(lt(r)))},lt=({_id:t,name:e,price:o,img:c})=>{const n=document.getElementById("discount-card-template").content.cloneNode(!0);n.querySelector(".discount-products-item").addEventListener("click",()=>{w(t)});const a=n.querySelector(".discount-products-item-image");a.src=c,a.alt=e+" image";const m=n.querySelector(".discount-products-subtitle");m.textContent=e;const i=n.querySelector(".discount-products-item-price");return i.textContent="$"+o,n.querySelector(".discount-products-item-btn").addEventListener("click",async u=>await E(u,t)),n},it=2;at(it);
//# sourceMappingURL=index.js.map
