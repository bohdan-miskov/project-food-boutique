import{o as M}from"./assets/footer-BOpFOAkR.js";import{a as y,S as I}from"./assets/vendor-Df9iwuFY.js";const D=async()=>(await y.get("https://food-boutique.b.goit.study/api/products/categories")).data,_=async()=>{const t=await D(),e=document.querySelector("[name='categoriesSelect']");t.forEach(o=>{const r=document.createElement("option");r.value=o,r.textContent=o.split("_").join(" "),e==null||e.appendChild(r)})};_();const k={showSearch:!1,allowDeselect:!1,hideSelected:!0,placeholderText:"",closeOnSelect:!0};new I({select:"#filters-categories-select",settings:k});new I({select:"#filters-sort-select",settings:k});const A=async()=>(await y.get("https://food-boutique.b.goit.study/api/products/discount")).data,R=async()=>(await y.get("https://food-boutique.b.goit.study/api/products/popular")).data,N=async t=>(await y.get("https://food-boutique.b.goit.study/api/products",{params:t})).data,O=async t=>(await y.get(`https://food-boutique.b.goit.study/api/products/${t}`)).data,T=(t,e,o,r,n)=>{const c={keyword:t,page:r,limit:n};switch(e!="all"&&(c.category=e),o){case"popularity":{c.byPopularity=!0;break}case"alph_asc":{c.byABC=!0;break}case"alph_desc":{c.byABC=!1;break}case"price_asc":{c.byPrice=!0;break}case"price_desc":{c.byPrice=!1;break}}return c},$=async t=>{const e=await O(t),o=document.querySelector(".product-modal-backdrop");o.innerHTML="",o.appendChild(j(e)),M(o)},j=({_id:t,img:e,name:o,category:r,desc:n,size:c,price:s,popularity:l,is10PercentOff:p})=>{const d=document.getElementById("product-modal-template").content.cloneNode(!0);p&&d.querySelector(".product-modal").classList.add("is-discount");const m=d.querySelector(".product-modal-image");m.src=e,m.alt=o+" image";const b=d.querySelector(".product-modal-title");b.textContent=o;const g=d.querySelectorAll(".product-modal-descr-item-value");g[0].textContent=r.split("_").join(" "),g[1].textContent=c,g[2].textContent=l.toString();const h=d.querySelector(".product-modal-descr-text");h.textContent=n;const v=d.querySelector(".product-modal-price");return v.textContent="$"+s,d},H=t=>{const e=document.querySelector(".products-list");e.innerHTML="",t.forEach(o=>e.appendChild(Q(o)))},Q=({_id:t,img:e,name:o,category:r,size:n,price:c,popularity:s,is10PercentOff:l})=>{const i=document.getElementById("products-card-template").content.cloneNode(!0);i.querySelector(".products-item").addEventListener("click",()=>{$(t)}),l&&i.querySelector(".products-item").classList.add("is-discount");const m=i.querySelector(".products-item-image");m.src=e,m.alt=o+" image";const b=i.querySelector(".products-subtitle");b.textContent=o;const g=i.querySelectorAll(".products-item-descr-item-value");g[0].textContent=r.split("_").join(" "),g[1].textContent=n,g[2].textContent=s.toString();const h=i.querySelector(".products-item-price");return h.textContent="$"+c,i},F=(t,e,o)=>{const r=[];let n=Math.max(1,t-1),c=n+o-2;c>e&&(c=e,n=Math.max(1,c-o+1));for(let s=n;s<=c;s++)r.push(s);return r.length+1==e&&r.push(c+1),r};let P,f,C,q,a,u;const z=(t,e,o,r)=>{if(a=t,u=e,u<=1){document.querySelector(".products-pagination-container").classList.add("hidden");return}const n=document.querySelector(".products-pagination-center-side");n.innerHTML="";const c=F(a,u,o),s=c[0],l=c[c.length-1];s>2&&a>Math.floor(u/2)&&E(B(),n),c.forEach(p=>{E(G(p,r),n)}),l<u-1&&a<Math.floor(u/2)&&E(B(),n),J(u)},B=()=>{const t=document.createElement("button");return t.textContent="...",t.disabled=!0,t.classList.add("products-pagination-btn"),t},G=(t,e)=>{const o=document.createElement("button");return o.classList.add("products-pagination-btn"),o.textContent=t.toString(),t===a&&(o.classList.add("active"),o.disabled=!0),o.addEventListener("click",()=>{a=t,e(t)}),o},E=(t,e)=>{const o=document.createElement("li");o.appendChild(t),e.appendChild(o)},J=t=>{const e=a>1,o=a<t;P.disabled=!e,f.disabled=!e,C.disabled=!o,q.disabled=!o},K=t=>{const e=document.querySelector(".products-pagination-left-side"),o=document.querySelector(".products-pagination-right-side");P=e.querySelector(".product-pagination-nav-btn.once"),f=e.querySelector(".product-pagination-nav-btn.all"),C=o.querySelector(".product-pagination-nav-btn.once"),q=o.querySelector(".product-pagination-nav-btn.all"),P.addEventListener("click",()=>{a--,t(a)}),f.addEventListener("click",()=>{a=1,t(a)}),C.addEventListener("click",()=>{a++,t(a)}),q.addEventListener("click",()=>{a=u,t(a)})},U=()=>document.querySelector(".container").getBoundingClientRect().width>=768?5:3,V=()=>{const e=document.querySelector(".container").getBoundingClientRect().width;return e>=1440?9:e>=768?8:6};let x="",L="all",w="popularity";const W=V(),X=U(),Y=async t=>{var n,c,s;t.preventDefault();const e=t.target,o=new FormData(e),r=1;x=((n=o.get("searchQueryInput"))==null?void 0:n.toString().trim())??"",L=((c=o.get("categoriesSelect"))==null?void 0:c.toString())??"all",w=((s=o.get("sortSelect"))==null?void 0:s.toString())??"popularity",await S(r)},S=async t=>{const e=T(x,L,w,t,W),o=await N(e),r=o.results,n=o.totalPages;H(r),z(t,n,X,S)};document.addEventListener("DOMContentLoaded",async()=>{var r,n,c;const t=document.querySelector(".filters-form");if(!t)return;t.addEventListener("submit",Y),K(S);const e=new FormData(t),o=1;x=((r=e.get("searchQueryInput"))==null?void 0:r.toString().trim())??"",L=((n=e.get("categoriesSelect"))==null?void 0:n.toString())??"all",w=((c=e.get("sortSelect"))==null?void 0:c.toString())??"popularity",await S(o)});const Z=async(t=-1)=>{const e=await R(),o=t===-1?e.slice(0):e.slice(0,t),r=document.querySelector(".popular-products-list");o.forEach(n=>r.appendChild(tt(n)))},tt=({name:t,category:e,size:o,popularity:r,img:n})=>{const s=document.getElementById("popular-card-template").content.cloneNode(!0),l=s.querySelector(".popular-products-item-image");l.src=n,l.alt=t+" image";const p=s.querySelector(".popular-products-subtitle");p.textContent=t;const i=s.querySelectorAll(".popular-products-item-descr-item-value");return i[0].textContent=e.split("_").join(" "),i[1].textContent=o,i[2].textContent=String(r),s},et=5;Z(et);const ot=async(t=-1)=>{const e=await A(),o=t===-1?e.slice(0):e.slice(0,t),r=document.querySelector(".discount-products-list");o.forEach(n=>r.appendChild(nt(n)))},nt=({name:t,price:e,img:o})=>{const n=document.getElementById("discount-card-template").content.cloneNode(!0),c=n.querySelector(".discount-products-item-image");c.src=o,c.alt=t+" image";const s=n.querySelector(".discount-products-subtitle");s.textContent=t;const l=n.querySelector(".discount-products-item-price");return l.textContent="$"+e,n},ct=2;ot(ct);
//# sourceMappingURL=index.js.map
